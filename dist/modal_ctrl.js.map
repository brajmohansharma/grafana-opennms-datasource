{"version":3,"sources":["../src/modal_ctrl.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAM;AACJ,iBADI,SACJ,CAAY,MAAZ,EAAoB;gCADhB,WACgB;;AAClB,eAAK,MAAL,GAAc,MAAd,CADkB;AAElB,eAAK,KAAL,GAAa,EAAb,CAFkB;AAGlB,eAAK,WAAL,GAAmB,IAAnB,CAHkB;;AAKlB,eAAK,aAAL,GALkB;SAApB;;qBADI;;0CASY;AACd,gBAAI,OAAO,IAAP,CADU;AAEd,iBAAK,SAAL,GAAiB,IAAjB,CAFc;AAGd,iBAAK,MAAL,CAAY,MAAZ,CAAmB,KAAK,KAAL,CAAnB,CACG,IADH,CACQ,UAAU,OAAV,EAAmB;;AAEvB,mBAAK,WAAL,GAAmB,IAAnB;;AAFuB,kBAIvB,CAAK,IAAL,GAAY,QAAQ,IAAR,CAJW;AAKvB,mBAAK,KAAL,GAAa,QAAQ,KAAR,CALU;AAMvB,mBAAK,UAAL,GAAkB,QAAQ,UAAR;;AANK,kBAQvB,CAAK,SAAL,GAAiB,KAAjB,CARuB;aAAnB,EASH,YAAY;AACb,mBAAK,SAAL,GAAiB,KAAjB,CADa;aAAZ,CAVL,CAHc;;;;wCAkBF,OAAO;AACnB,gBAAI,KAAK,WAAL,KAAqB,KAArB,EAA4B;AAC9B,mBAAK,WAAL,GAAmB,IAAnB,CAD8B;aAAhC,MAEO;AACL,mBAAK,WAAL,GAAmB,KAAnB;;AADK,kBAGL,CAAK,GAAL,GAAW,KAAK,IAAL,CAAU,KAAK,WAAL,CAArB,CAHK;aAFP;;;;mCASO;AACP,iBAAK,MAAL,CAAY,MAAZ,CAAmB,MAAnB,GADO;AAEP,iBAAK,MAAL,CAAY,OAAZ,GAFO;;;;+BAKJ;AACH,gBAAI,KAAK,WAAL,KAAqB,IAArB,EAA2B;AAC7B,mBAAK,MAAL,CAAY,MAAZ,CAAmB,OAAnB,CAA2B,KAAK,GAAL,CAA3B,CAD6B;aAA/B,MAEO;AACL,mBAAK,MAAL,CAAY,MAAZ,CAAmB,MAAnB,GADK;aAFP;AAKA,iBAAK,MAAL,CAAY,OAAZ,GANG;;;;eA1CD;;;AAoDN,UAAI,OAAO,OAAP,KAAmB,WAAnB,EAAgC;AAClC,gBAAQ,MAAR,CAAe,qBAAf,EACG,UADH,CACc,2BADd,EAC2C,SAD3C,EADkC;OAApC","file":"modal_ctrl.js","sourcesContent":["class ModalCtrl {\n  constructor($scope) {\n    this.$scope = $scope;\n    this.query = \"\";\n    this.selectedRow = null;\n\n    this.searchForRows();\n  }\n\n  searchForRows() {\n    var self = this;\n    this.searching = true;\n    this.$scope.search(this.query)\n      .then(function (results) {\n        // Reset the selected row\n        self.selectedRow = null;\n        // Add the results to the scope\n        self.rows = results.rows;\n        self.count = results.count;\n        self.totalCount = results.totalCount;\n        // We're done\n        self.searching = false;\n      }, function () {\n        self.searching = false;\n      });\n  }\n\n  setClickedRow(index) {\n    if (this.selectedRow === index) {\n      this.selectedRow = null;\n    } else {\n      this.selectedRow = index;\n      // Keep a reference to the row when the selection is made\n      this.row = this.rows[this.selectedRow];\n    }\n  }\n\n  cancel() {\n    this.$scope.result.reject();\n    this.$scope.dismiss();\n  }\n\n  ok() {\n    if (this.selectedRow !== null) {\n      this.$scope.result.resolve(this.row);\n    } else {\n      this.$scope.result.reject();\n    }\n    this.$scope.dismiss();\n  }\n}\n\nif (typeof angular !== 'undefined') {\n  angular.module('grafana.controllers')\n    .controller('OpenNMSModalSelectionCtrl', ModalCtrl);\n}\n"]}